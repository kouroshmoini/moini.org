---
layout: null
permalink: /assets/search.json
---

[
  {% assign pages_indexed = site.pages | where_exp:"p","p.search != false" %}
  {% assign posts_indexed = site.posts %}

  {% assign items = posts_indexed | concat: pages_indexed %}

  {% for item in items %}
    {% if item.title and item.url %}
    {
      "title": {{ item.title | jsonify }},
      "url": {{ item.url | relative_url | jsonify }},
      "type": {% if item.layout == "post" %}"Post"{% else %}"Page"{% endif %},
      "date": {% if item.date %}{{ item.date | date: "%b %d, %Y" | jsonify }}{% else %}""{% endif %},
      "content": {{ item.content | strip_html | strip_newlines | truncate: 400 | jsonify }}
    }{% unless forloop.last %},{% endunless %}
    {% endif %}
  {% endfor %}
]
