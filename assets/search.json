---
layout: null
permalink: /assets/search.json
---

{% assign pages_indexed = site.pages | where_exp:"p","p.title and p.url and p.search != false" %}
{% assign posts_indexed = site.posts | where_exp:"p","p.title and p.url" %}
{% assign items = posts_indexed | concat: pages_indexed %}

[
{% for item in items %}
  {
    "title": {{ item.title | jsonify }},
    "url": {{ item.url | relative_url | jsonify }},
    "type": {% if item.layout == "post" %}"Post"{% else %}"Page"{% endif %},
    "date": {% if item.date %}{{ item.date | date: "%b %d, %Y" | jsonify }}{% else %}""{% endif %},
    "content": {{ item.content | strip_html | strip_newlines | truncate: 600 | jsonify }}
  }{% unless forloop.last %},{% endunless %}
{% endfor %}
]
